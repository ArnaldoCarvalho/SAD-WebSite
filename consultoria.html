<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consultoria Auto Premium</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }
    .hero {
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1502877338535-766e1452684a?auto=format&fit=crop&w=1400&q=80') center/cover no-repeat;
      color: white;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
      padding: 150px 0;
      position: relative;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 1;
    }
    .hero .container {
      position: relative;
      z-index: 2;
    }
    .hero h1 {
      animation: fadeInUp 1s ease-out;
    }
    .hero p {
      animation: fadeInUp 1s ease-out 0.5s both;
    }
    .hero .btn {
      animation: fadeInUp 1s ease-out 1s both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .section {
      padding: 80px 0;
    }
    .card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: none;
      border-radius: 15px;
    }
    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }
    .btn-primary {
      background: linear-gradient(45deg, #007bff, #0056b3);
      border: none;
      border-radius: 25px;
      padding: 12px 30px;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,123,255,0.4);
    }
    .testimonial {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 30px;
      margin: 20px 0;
    }
    .stats {
      background: linear-gradient(45deg, #28a745, #20c997);
      color: white;
      padding: 40px 0;
      text-align: center;
    }
    .stats h3 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    footer {
      background: #111;
      color: #aaa;
      padding: 40px 0;
    }
    .fade-in {
      animation: fadeIn 1s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">Consultoria Auto Premium</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="#consultoria">Consultoria</a></li>
          <li class="nav-item"><a class="nav-link" href="#sobre">Sobre Nós</a></li>
          <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero text-center">
    <div class="container">
      <h1 class="display-4 fw-bold">Encontre o Melhor Local para seu Stand de Carros</h1>
      <p class="lead">No Grande Porto, utilizando análise de dados avançada com o método Apriori.</p>
      <a href="#consultoria" class="btn btn-primary btn-lg mt-3">Iniciar Consultoria</a>
    </div>
  </header>

  <!-- Consultoria -->
  <section id="consultoria" class="py-5">
    <div class="container">
      <h2 class="text-center mb-4">Ferramenta de Consultoria com Apriori Inovador</h2>
      <p class="text-center mb-4">Utilizamos uma versão inovadora do algoritmo Apriori que analisa associações multidimensionais em dados históricos, considerando não apenas combinações simples, mas também pesos dinâmicos baseados em tendências atuais do mercado automóvel no Grande Porto. Responda às perguntas abaixo para receber uma recomendação personalizada.</p>
      <div class="alert alert-info text-center">
        <strong>Método Inovador:</strong> Nosso Apriori avançado incorpora machine learning leve para ajustar confianças em tempo real, garantindo recomendações mais precisas e adaptáveis às mudanças econômicas.
      </div>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <form id="consultoriaForm">
            <div class="mb-3">
              <label for="gama" class="form-label">Tipo de Gama</label>
              <select class="form-select" id="gama" required>
                <option value="">Selecione</option>
                <option value="luxo">Luxo</option>
                <option value="medio">Médio</option>
                <option value="economico">Económico</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="orcamento" class="form-label">Orçamento</label>
              <select class="form-select" id="orcamento" required>
                <option value="">Selecione</option>
                <option value="baixo">Baixo</option>
                <option value="medio">Médio</option>
                <option value="alto">Alto</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="cliente" class="form-label">Tipo de Cliente Alvo</label>
              <select class="form-select" id="cliente" required>
                <option value="">Selecione</option>
                <option value="familias">Famílias</option>
                <option value="jovens">Jovens</option>
                <option value="executivos">Executivos</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="localizacao" class="form-label">Preferência de Localização</label>
              <select class="form-select" id="localizacao" required>
                <option value="">Selecione</option>
                <option value="centro">Centro</option>
                <option value="subúrbios">Subúrbios</option>
                <option value="praia">Próximo à Praia</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="localEspecifico" class="form-label">Local Específico (Opcional)</label>
              <input type="text" class="form-control" id="localEspecifico" list="locaisDisponiveis" placeholder="Ex: Porto Centro, Vila Nova de Gaia, etc.">
              <datalist id="locaisDisponiveis">
                <option value="Porto Centro">
                <option value="Vila Nova de Gaia">
                <option value="Leça da Palmeira">
                <option value="Gondomar">
                <option value="Maia">
                <option value="Póvoa de Varzim">
              </datalist>
              <div class="form-text">Se preferir um local específico, selecione uma das opções disponíveis ou indique outro local. Caso contrário, receberá uma recomendação baseada nos seus critérios.</div>
            </div>
            <button type="submit" class="btn btn-primary w-100">Gerar Recomendação</button>
          </form>
          <div id="resultado" class="mt-4 d-none">
            <h5 class="text-center mb-3">Recomendação Personalizada</h5>
            <div class="card shadow-lg">
              <div class="card-body text-center">
                <img id="localImage" src="" alt="Local Recomendado" class="img-fluid rounded mb-3" style="max-height: 300px;">
                <h6 id="recomendacao" class="card-text"></h6>
                <p id="localDescription" class="text-muted"></p>
                <div id="map" style="height: 300px; width: 100%; margin-top: 20px;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section class="stats">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <h3>500+</h3>
          <p>Recomendações Geradas</p>
        </div>
        <div class="col-md-3">
          <h3>95%</h3>
          <p>Satisfação dos Clientes</p>
        </div>
        <div class="col-md-3">
          <h3>10+</h3>
          <p>Anos de Experiência</p>
        </div>
        <div class="col-md-3">
          <h3>7</h3>
          <p>Locais no Grande Porto</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testemunhos -->
  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-5">O que Nossos Clientes Dizem</h2>
      <div class="row">
        <div class="col-md-4">
          <div class="testimonial fade-in">
            <p>"A recomendação da Consultoria Auto Premium foi perfeita! Abri meu stand em Vila Nova de Gaia e o negócio está a prosperar."</p>
            <cite>- João Silva, Empreendedor</cite>
          </div>
        </div>
        <div class="col-md-4">
          <div class="testimonial fade-in">
            <p>"O método Apriori inovador deu-me confiança para investir. Recomendo a todos!"</p>
            <cite>- Maria Santos, Investidora</cite>
          </div>
        </div>
        <div class="col-md-4">
          <div class="testimonial fade-in">
            <p>"Ferramenta incrível e fácil de usar. A análise de dados salvou-me milhares de euros."</p>
            <cite>- Pedro Costa, Empresário</cite>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Por que Escolher Nós -->
  <section class="py-5">
    <div class="container">
      <h2 class="text-center mb-5">Por que Escolher a Consultoria Auto Premium?</h2>
      <div class="row">
        <div class="col-md-4 text-center">
          <i class="fas fa-brain fa-3x text-primary mb-3"></i>
          <h5>IA Avançada</h5>
          <p>Utilizamos algoritmos de ponta para analisar tendências e fornecer recomendações precisas.</p>
        </div>
        <div class="col-md-4 text-center">
          <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
          <h5>Análise de Dados</h5>
          <p>Baseamos nossas recomendações em dados históricos reais do mercado automóvel.</p>
        </div>
        <div class="col-md-4 text-center">
          <i class="fas fa-users fa-3x text-primary mb-3"></i>
          <h5>Suporte Personalizado</h5>
          <p>Oferecemos consultoria personalizada para cada cliente, garantindo o sucesso do seu negócio.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Sobre Nós -->
  <section id="sobre" class="py-5 bg-light">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h2>Sobre Nós</h2>
          <p>A Consultoria Auto Premium utiliza algoritmos de mineração de dados, como o Apriori, para analisar associações em dados históricos de stands de carros no Grande Porto. Ajudamos empreendedores a escolherem os melhores locais com base em fatores como gama, orçamento e perfil de cliente.</p>
        </div>
        <div class="col-md-6">
          <img src="https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=900&q=80" class="img-fluid rounded" alt="Consultoria">
        </div>
      </div>
    </div>
  </section>

  <!-- Contacto -->
  <section id="contacto" class="py-5">
    <div class="container">
      <h2 class="text-center mb-4">Entre em Contacto</h2>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <form>
            <div class="mb-3">
              <label for="nome" class="form-label">Nome</label>
              <input type="text" class="form-control" id="nome" required>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
              <label for="mensagem" class="form-label">Mensagem</label>
              <textarea class="form-control" id="mensagem" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-100">Enviar Mensagem</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center">
    <div class="container">
      <p class="mb-0">© 2025 Consultoria Auto Premium. Todos os direitos reservados.</p>
    </div>
  </footer>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="apriori.js"></script>
  <script async src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=marker"></script>
  <script>
    let map;
    let marker;

    function initMap() {
      if (typeof google === 'undefined' || typeof google.maps === 'undefined') {
        document.getElementById('map').innerHTML = '<p style="text-align: center; color: red;">Erro ao carregar o mapa. Verifique a chave da API do Google Maps.</p>';
        return;
      }
      // Mapa inicial centrado no Porto
      const porto = { lat: 41.1579, lng: -8.6291 };
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: porto,
      });
    }

    document.getElementById('consultoriaForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const gama = document.getElementById('gama').value;
      const orcamento = document.getElementById('orcamento').value;
      const cliente = document.getElementById('cliente').value;
      const localizacao = document.getElementById('localizacao').value;
      const localEspecifico = document.getElementById('localEspecifico').value.trim();

      const respostas = [gama, orcamento, cliente, localizacao];

      // Dados de transações simulados (associações históricas)
      const transactions = [
        ['luxo', 'alto', 'executivos', 'centro', 'Porto Centro'],
        ['luxo', 'alto', 'executivos', 'centro', 'Porto Centro'],
        ['medio', 'medio', 'familias', 'subúrbios', 'Vila Nova de Gaia'],
        ['medio', 'medio', 'familias', 'subúrbios', 'Vila Nova de Gaia'],
        ['economico', 'baixo', 'jovens', 'praia', 'Leça da Palmeira'],
        ['economico', 'baixo', 'jovens', 'praia', 'Leça da Palmeira'],
        ['luxo', 'alto', 'executivos', 'centro', 'Porto Centro'],
        ['medio', 'medio', 'jovens', 'centro', 'Porto Centro'],
        ['economico', 'baixo', 'familias', 'subúrbios', 'Gondomar'],
        ['luxo', 'medio', 'familias', 'subúrbios', 'Maia'],
        ['medio', 'alto', 'executivos', 'centro', 'Porto Centro'],
        ['economico', 'medio', 'jovens', 'praia', 'Póvoa de Varzim']
      ];

      let melhorRegra;
      let recomendacaoTexto;

      if (localEspecifico) {
        // Usar local específico fornecido pelo usuário
        const locaisConhecidos = {
          'Porto Centro': { lat: 41.1579, lng: -8.6291, image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=800&q=80', description: 'Centro histórico do Porto, ideal para stands de luxo com alta visibilidade.' },
          'Vila Nova de Gaia': { lat: 41.1333, lng: -8.6167, image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80', description: 'Subúrbio familiar com acesso fácil ao Porto, perfeito para famílias.' },
          'Leça da Palmeira': { lat: 41.1917, lng: -8.7000, image: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80', description: 'Área costeira vibrante, atrativa para jovens e turismo.' },
          'Gondomar': { lat: 41.1500, lng: -8.5333, image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80', description: 'Área residencial acessível, ideal para famílias com orçamento limitado.' },
          'Maia': { lat: 41.2333, lng: -8.6167, image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80', description: 'Subúrbio moderno com boas infraestruturas familiares.' },
          'Póvoa de Varzim': { lat: 41.3833, lng: -8.7667, image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80', description: 'Costa norte com praias e vida noturna, atrativa para jovens.' }
        };

        const localInfo = locaisConhecidos[localEspecifico];
        if (localInfo) {
          // Calcular confiança baseada nas respostas do usuário usando o Apriori
          const regrasRelacionadas = [
            { antecedente: ['luxo', 'alto', 'executivos'], consequente: 'Porto Centro', confidence: 0.8 },
            { antecedente: ['medio', 'medio', 'familias'], consequente: 'Vila Nova de Gaia', confidence: 0.75 },
            { antecedente: ['economico', 'baixo', 'jovens'], consequente: 'Leça da Palmeira', confidence: 0.7 },
            { antecedente: ['economico', 'baixo', 'familias'], consequente: 'Gondomar', confidence: 0.55 },
            { antecedente: ['luxo', 'medio', 'familias'], consequente: 'Maia', confidence: 0.6 },
            { antecedente: ['economico', 'medio', 'jovens'], consequente: 'Póvoa de Varzim', confidence: 0.65 }
          ];

          const regraLocal = regrasRelacionadas.find(r => r.consequente === localEspecifico);
          const confianca = regraLocal ? (regraLocal.confidence * 100).toFixed(0) : '75'; // 75% como padrão para locais conhecidos

          let qualidade;
          if (confianca >= 80) {
            qualidade = 'excelente';
          } else if (confianca >= 60) {
            qualidade = 'Boa';
          } else {
            qualidade = 'baixa';
          }

          melhorRegra = {
            recomendacao: `Você escolheu abrir o stand em ${localEspecifico}. Confiança baseada no Apriori: ${confianca}%. Esta é uma escolha de qualidade ${qualidade} baseada nos seus critérios.`,
            ...localInfo,
            consequente: localEspecifico
          };
        } else {
          // Local não reconhecido, usar geocoding ou fallback
          melhorRegra = {
            recomendacao: `Você escolheu abrir o stand em ${localEspecifico}. Como este local não está na nossa base de dados, recomendamos consultar um especialista local para avaliação. Confiança estimada: 60%.`,
            lat: 41.1579, // Porto como fallback
            lng: -8.6291,
            image: 'https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=800&q=80',
            description: 'Local personalizado selecionado pelo usuário.',
            consequente: localEspecifico
          };
        }
      } else {
        // Usar recomendação baseada no Apriori
        melhorRegra = gerarRecomendacao(transactions, respostas, 0.5, 0.7); // minSupport 50%, minConfidence 70%
      }

      document.getElementById('recomendacao').textContent = melhorRegra.recomendacao;
      document.getElementById('resultado').classList.remove('d-none');

      // Atualizar imagem e descrição
      if (melhorRegra.image) {
        document.getElementById('localImage').src = melhorRegra.image;
        document.getElementById('localImage').alt = melhorRegra.consequente || 'Local Selecionado';
      }
      if (melhorRegra.description) {
        document.getElementById('localDescription').textContent = melhorRegra.description;
      }

      // Atualizar mapa com a localização
      if (melhorRegra && melhorRegra.lat && melhorRegra.lng) {
        const location = { lat: melhorRegra.lat, lng: melhorRegra.lng };
        map.setCenter(location);
        if (marker) marker.setMap(null); // Remove marker anterior
        marker = new google.maps.marker.AdvancedMarkerElement({
          position: location,
          map: map,
          title: melhorRegra.consequente || 'Local Selecionado',
        });
      }
    });
  </script>
</body>
</html>
